extraction:
  cpp:
    prepare:
      packages:
        - build-essential
        - g++-10
        - gcc-10
    after_prepare:
      - mkdir -p $LGTM_WORKSPACE/bin
      - ln -sf /usr/bin/gcc-10 $LGTM_WORKSPACE/bin/gcc
      - ln -sf /usr/bin/g++-10 $LGTM_WORKSPACE/bin/g++
      - mkdir -p $LGTM_WORKSPACE/custom_cmake
      - wget --quiet -O - https://cmake.org/files/v3.23/cmake-3.23.2-linux-x86_64.tar.gz | tar --strip-components=1 -xz -C $LGTM_WORKSPACE/custom_cmake
      - export PATH=$LGTM_WORKSPACE/bin:$LGTM_WORKSPACE/custom_cmake/bin:${PATH}
    index:
      build_command:
        - cd $LGTM_SRC
        - mkdir build; cd build
        - cmake .. -DCMAKE_BUILD_TYPE=RELWITHDEBINFO -DCMAKE_C_COMPILER=gcc -DCMAKE_CXX_COMPILER=g++
        - cmake --build . --parallel
